<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>BFS和DFS</title>
    <url>/2020/05/19/BFS%E5%92%8CDFS/</url>
    <content><![CDATA[<p>下面我们通过一个二叉树层序遍历的题目来分析一下BFS和DFS方法的区别。</p>
<h1 id="例题"><a href="#例题" class="headerlink" title="例题"></a><a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal" target="_blank" rel="noopener">例题</a></h1><p>给你一个二叉树，请你返回其按 <strong>层序遍历</strong> 得到的节点值。 （即逐层地，从左到右访问所有节点）。</p>
<p>示例：<br>二叉树：[3,9,20,null,null,15,7],</p>
<pre><code>  3
 / \
9  20
  /  \
 15   7</code></pre><p>返回其层次遍历结果：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  [3],</span><br><span class="line">  [9,20],</span><br><span class="line">  [15,7]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>左边是BFS，按照层进行搜索；右边是DFS，先一路走到底，当无路可走则回溯上来，走其他路。</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200519101431.png" alt="image-20200519101430606"></p>
<h1 id="BFS（breadth-First-Search）广度优先搜索"><a href="#BFS（breadth-First-Search）广度优先搜索" class="headerlink" title="BFS（breadth First Search）广度优先搜索"></a>BFS（breadth First Search）广度优先搜索</h1><p>BFS总共有两个通用模板。</p>
<p>1.如果不需要确定当前遍历到了哪一层，BFS模板如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">while queue 不空：</span><br><span class="line">    cur &#x3D; queue.pop()</span><br><span class="line">    for 节点 in cur的所有相邻节点：</span><br><span class="line">        if 该节点有效且未访问过：</span><br><span class="line">            queue.push(该节点)</span><br></pre></td></tr></table></figure>

<p>2.如果要确定当前遍历到了哪一层，BFS模板如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">level &#x3D; 0</span><br><span class="line">while queue 不空：</span><br><span class="line">    size &#x3D; queue.size()</span><br><span class="line">    while (size --) &#123;</span><br><span class="line">        cur &#x3D; queue.pop()</span><br><span class="line">        for 节点 in cur的所有相邻节点：</span><br><span class="line">            if 该节点有效且未被访问过：</span><br><span class="line">                queue.push(该节点)</span><br><span class="line">    &#125;</span><br><span class="line">    level ++;</span><br></pre></td></tr></table></figure>

<p>本题要求二叉树的层次遍历，所以同一层的节点应该放在一起，故使用模板二。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * Definition for a binary tree node.</span><br><span class="line"> * function TreeNode(val) &#123;</span><br><span class="line"> *     this.val &#x3D; val;</span><br><span class="line"> *     this.left &#x3D; this.right &#x3D; null;</span><br><span class="line"> * &#125;</span><br><span class="line"> *&#x2F;</span><br><span class="line">var levelOrder &#x3D; function(root) &#123;</span><br><span class="line">    var result &#x3D; [];</span><br><span class="line">    if (!root) return result;</span><br><span class="line">    var queue &#x3D; [];</span><br><span class="line">    queue.push(root);</span><br><span class="line">    while (queue.length !&#x3D;&#x3D; 0) &#123;</span><br><span class="line">        var length &#x3D; queue.length;</span><br><span class="line">        result.push([]);</span><br><span class="line">        for (var i &#x3D; 0; i &lt; length; i++) &#123;</span><br><span class="line">            var treeNode &#x3D; queue.shift();</span><br><span class="line">            result[result.length - 1].push(treeNode.val);</span><br><span class="line">            if (treeNode.left) queue.push(treeNode.left);</span><br><span class="line">            if (treeNode.right) queue.push(treeNode.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>实现过程如下所示，我们先将根节点放到队列中。</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200519110047.png" alt="image-20200519110046014"></p>
<p>首先拿出根节点，如果左子树/右子树不为空，就将他们放入队列中。第一遍处理完后，根节点已经从队列中拿走了，而根节点的两个孩子已放入队列中了，现在队列中就有两个节点 <code>2</code> 和 <code>5</code>。</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200519110134.png" alt="image-20200519110133339"></p>
<p>第二次处理，会将 <code>2</code> 和 <code>5</code> 这两个节点从队列中拿走，然后再将 2 和 5 的子节点放入队列中，现在队列中就有三个节点 <code>3</code>，<code>4</code>，<code>6</code>。</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200519110207.png" alt="image-20200519110206085"></p>
<p>我们把每层遍历到的节点都放入到一个结果集中，最后返回这个结果集就可以了。</p>
<p>时间复杂度： O(n)<em>O</em>(<em>n</em>)<br>空间复杂度：O(n)<em>O</em>(<em>n</em>)</p>
<h1 id="DFS（Deep-First-Search）深度优先搜索"><a href="#DFS（Deep-First-Search）深度优先搜索" class="headerlink" title="DFS（Deep First Search）深度优先搜索"></a>DFS（Deep First Search）深度优先搜索</h1><p><img src="https://pic.leetcode-cn.com/aeed09e12573ec00d83663bb4f77562e8904ac58cdb2cbe6e995f2ac33b12934-0203_1.gif" alt="0203_1.gif"></p>
<p> DFS 不是按照层次遍历的。为了让递归的过程中同一层的节点放到同一个列表中，在递归时要记录每个节点的深度 level。递归到新节点要把该节点放入 level 对应列表的末尾。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * Definition for a binary tree node.</span><br><span class="line"> * function TreeNode(val) &#123;</span><br><span class="line"> *     this.val &#x3D; val;</span><br><span class="line"> *     this.left &#x3D; this.right &#x3D; null;</span><br><span class="line"> * &#125;</span><br><span class="line"> *&#x2F;</span><br><span class="line">var levelOrder &#x3D; function(root) &#123;</span><br><span class="line">    var result &#x3D; [];</span><br><span class="line">    if (!root) return result;</span><br><span class="line"></span><br><span class="line">    var dfs &#x3D; function(node, level) &#123;</span><br><span class="line">        if (result.length - 1 &lt; level) &#123;</span><br><span class="line">            result.push([]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        result[level - 1].push(node.val);</span><br><span class="line">        if (node.left) dfs(node.left, level + 1);</span><br><span class="line">        if (node.right) dfs(node.right, level + 1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dfs(root, 0);</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>时间复杂度：O(N)<em>O</em>(<em>N</em>)<br>空间复杂度：O(h)<em>O</em>(<em>h</em>)，<code>h</code> 是树的高度</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h2 id="数据结构上的运用"><a href="#数据结构上的运用" class="headerlink" title="数据结构上的运用"></a>数据结构上的运用</h2><p>DFS用递归的形式，用到了栈结构，先进后出。</p>
<p>BFS选取状态用队列的形式，先进先出。</p>
<h2 id="复杂度"><a href="#复杂度" class="headerlink" title="复杂度"></a>复杂度</h2><p>DFS的复杂度与BFS的复杂度大体一致，不同之处在于遍历的方式与对于问题的解决出发点不同，DFS适合目标明确，而BFS适合大范围的寻找。</p>
<h2 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h2><p>思想上来说这两种方法都是穷竭列举所有的情况。</p>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>DFS暂遇到的两个场景：层序遍历和最短路径（多源BFS）</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><p><a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/" target="_blank" rel="noopener">二叉树层序遍历（leetcode）</a></p>
</li>
<li><p><a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/solution/tao-mo-ban-bfs-he-dfs-du-ke-yi-jie-jue-by-fuxuemin/" target="_blank" rel="noopener">套模板！BFS 和 DFS 都可以解决</a></p>
</li>
<li><p><a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/solution/bfs-de-shi-yong-chang-jing-zong-jie-ceng-xu-bian-l/" target="_blank" rel="noopener">BFS 的使用场景总结：层序遍历、最短路径问题</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/24986203" target="_blank" rel="noopener">搜索思想——DFS &amp; BFS（基础基础篇）</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>BFS</tag>
        <tag>DFS</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo搭建博客系列：（三）Typora+PicGo实现图片上传功能</title>
    <url>/2020/05/12/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%97%EF%BC%9A%EF%BC%88%E4%B8%89%EF%BC%89Typora-PicGo%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>编写markdown时经常会有插入图片的需求，而粘贴的图片的地址为本地地址，部署时是无法查看的。办法总比问题多，下面教大家使用Typora+PicGo+GitHub图床给markdown愉快的添加图片。</p>
<a id="more"></a>



<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>自行下载安装如下软件：</p>
<ul>
<li><a href="https://www.typora.io/" target="_blank" rel="noopener">Typora</a></li>
<li><a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noopener">PicGo</a></li>
</ul>
<h2 id="Github图床"><a href="#Github图床" class="headerlink" title="Github图床"></a>Github图床</h2><ul>
<li>新建repository，命名为<code>cloudImage</code></li>
<li>添加访问token，复制并保存token（只会出现一次）</li>
</ul>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200518162329.png" alt="image-20200518162328069"></p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200518162424.png" alt="image-20200518162420210"></p>
<p>​    <img src="https://yuanchangjian.github.io/cloudImage/images/20200518162122.png" alt="image-20200518162120925"></p>
<p>​    <img src="https://yuanchangjian.github.io/cloudImage/images/20200518162215.png" alt="image-20200518162213723"></p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="配置typora"><a href="#配置typora" class="headerlink" title="配置typora"></a>配置typora</h2><p>打开typora，选择左上角<code>文件</code>，选择<code>偏好设置</code>，配置成如下所示：</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200518160024.png" alt="image-20200518155153969"></p>
<h2 id="配置PicGo"><a href="#配置PicGo" class="headerlink" title="配置PicGo"></a>配置PicGo</h2><h3 id="图床设置"><a href="#图床设置" class="headerlink" title="图床设置"></a>图床设置</h3><p>根据上述新建的GitHub图床进行配置（我这里在仓库内创建了一个<code>images</code>目录存储图片）。</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200518162932.png" alt="image-20200518162929836"></p>
<h3 id="开启时间戳重命名"><a href="#开启时间戳重命名" class="headerlink" title="开启时间戳重命名"></a>开启时间戳重命名</h3><p>防止GitHub重名上传失败。</p>
<p> <img src="https://yuanchangjian.github.io/cloudImage/images/20200518163356.png" alt="image-20200518163355105"></p>
<h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><p>将本地图片放入Typora时，会出现上传地图选项，点击上传图片即可。这里我演示一下图片地址的变化：</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200518164244.png" alt="image-20200518164240350"></p>
<p>上传后图片地址：</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200518164336.png" alt="image-20200518164334296"></p>
]]></content>
      <categories>
        <category>Hexo搭建博客系列</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo搭建博客系列：（二）自定义样式优化主题</title>
    <url>/2020/05/12/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%97%EF%BC%9A%EF%BC%88%E4%BA%8C%EF%BC%89%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F%E4%BC%98%E5%8C%96%E4%B8%BB%E9%A2%98/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本教程是我对Next主题的一些自定义样式修改，主要通过两种方式：修改<code>主题配置文件</code>和自定义样式。</p>
<a id="more"></a>

<h2 id="主题配置文件"><a href="#主题配置文件" class="headerlink" title="主题配置文件"></a>主题配置文件</h2><h3 id="隐藏文章更新日期"><a href="#隐藏文章更新日期" class="headerlink" title="隐藏文章更新日期"></a>隐藏文章更新日期</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  item_text: true</span><br><span class="line">  created_at: true</span><br><span class="line">  updated_at:</span><br><span class="line">    enable: false</span><br><span class="line">    another_day: true</span><br><span class="line">  categories: true</span><br></pre></td></tr></table></figure>

<h3 id="友情链接行内布局"><a href="#友情链接行内布局" class="headerlink" title="友情链接行内布局"></a>友情链接行内布局</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">links_settings:</span><br><span class="line">  icon: fa fa-link</span><br><span class="line">  title: Links</span><br><span class="line">  # Available values: block | inline</span><br><span class="line">  layout: inline</span><br></pre></td></tr></table></figure>

<h3 id="footer图标颜色"><a href="#footer图标颜色" class="headerlink" title="footer图标颜色"></a>footer图标颜色</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  ...</span><br><span class="line">  icon:</span><br><span class="line">    # Icon name in Font Awesome. See: https:&#x2F;&#x2F;fontawesome.com&#x2F;icons</span><br><span class="line">    name: fa fa-heart</span><br><span class="line">    # If you want to animate the icon, set it to true.</span><br><span class="line">    animated: false</span><br><span class="line">    # Change the color of icon, using Hex Code.</span><br><span class="line">    color: &quot;#000000&quot;&#39;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>



<h2 id="自定义样式"><a href="#自定义样式" class="headerlink" title="自定义样式"></a>自定义样式</h2><p>在主题目录的<code>/source/css</code>目录下新建<code>_custom.styl</code>文件。内容如下所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">* 文章目录显示多级标题,文章展示所有二级菜单</span><br><span class="line">*&#x2F;</span><br><span class="line">&#x2F;&#x2F;显示一级标题下的子标题</span><br><span class="line">.post-toc .nav .nav-level-1 &gt; .nav-child &#123;</span><br><span class="line">   display: block;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;显示二级标题下的子标题</span><br><span class="line">&#x2F;*.post-toc .nav .nav-level-2 &gt; .nav-child &#123;</span><br><span class="line">   display: block;</span><br><span class="line">&#125;&#x2F;*</span><br><span class="line">&#x2F;&#x2F;显示三级标题下的子标题</span><br><span class="line">&#x2F;*.post-toc .nav .nav-level-3 &gt; .nav-child &#123;</span><br><span class="line">   display: block;</span><br><span class="line">&#125;*&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">* 导航栏菜单右对齐</span><br><span class="line">*&#x2F;</span><br><span class="line">.menu &#123;</span><br><span class="line">  text-align: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Hexo搭建博客系列</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>语义化版本控制规范（SemVer）</title>
    <url>/2020/05/19/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E8%A7%84%E8%8C%83%EF%BC%88SemVer%EF%BC%89/</url>
    <content><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p><code>semver</code> 是 <a href="http://semver.org/lang/zh-CN/" target="_blank" rel="noopener">语义化版本（Semantic Versioning）规范</a> 的一个实现，目前是由 <code>npm</code> 的团队维护，实现了版本和版本范围的解析、计算、比较。下面列举一个<code>npm</code>下<code>vue</code>的版本历史。</p>
<a id="more"></a>

<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200519192502.png" alt="image-20200519181754033"></p>
<h1 id="版本格式"><a href="#版本格式" class="headerlink" title="版本格式"></a>版本格式</h1><ol>
<li>主版本号：当你做了不兼容的 API 修改。（如：V2.6.11 -&gt; V3.0.0-alpha.0）</li>
<li>次版本号：当你做了向下兼容的功能性新增。（如：V2.5.22 -&gt; V2.6.0-beta.1）</li>
<li>修订号：当你做了向下兼容的问题修正。（如：V2.6.10 -&gt; V2.6.11）</li>
</ol>
<h1 id="先行版本"><a href="#先行版本" class="headerlink" title="先行版本"></a>先行版本</h1><p>先行版本表示这个版本并非稳定，可以作为发布正式版之前的版本，格式是在修订版本号后面加上一个连接号<code>（-）</code>，再加上一连串以点（.）分割的标识符，标识符可以由英文、数字和连接号（[0-9A-Za-z-]）组成。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2.6.0-beta.1</span><br><span class="line">3.0.0-alpha.0</span><br><span class="line">1.0.0-0.3.7</span><br><span class="line">1.0.0-x.7.z.92</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>以下是一些常见的先行版本号名称：</p>
<ul>
<li>alpha：是内部测试版,一般不向外部发布,会有很多Bug.一般只有测试人员使用。</li>
<li>beta：也是测试版，这个阶段的版本会一直加入新的功能。在Alpha版之后推出。</li>
<li>rc：（Release　Candidate)  系统平台上就是发行候选版本。RC版不会再加入新的功能了，主要着重于除错。</li>
</ul>
<h1 id="版本编译元数据（可选）"><a href="#版本编译元数据（可选）" class="headerlink" title="版本编译元数据（可选）"></a>版本编译元数据（可选）</h1><p>版本编译元数据可以被标注在修订版或先行版本号之后，先加上一个<code>加号</code>再加上一连串以句点分隔的标识符来修饰。当判断版本的优先层级时，版本编译元数据可被忽略。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.0.0-alpha+001</span><br><span class="line">1.0.0+20130313144700</span><br><span class="line">1.0.0-beta+exp.sha.5114f85</span><br></pre></td></tr></table></figure>



<h1 id="定义依赖版本号"><a href="#定义依赖版本号" class="headerlink" title="定义依赖版本号"></a>定义依赖版本号</h1><p>在 <a href="https://npmjs.com/" target="_blank" rel="noopener">npm</a> 的依赖的规则中，还有 <code>~</code>、<code>&gt;</code>、<code>&lt;</code>、<code>=</code>、<code>&gt;=</code>、<code>&lt;=</code>、<code>-</code>、<code>||</code>、<code>x</code>、<code>X</code>、<code>*</code> 等符号；当使用 <code>npm install XX</code> 时，被安装的依赖的版本号前会默认加上 <code>^</code> 符号。</p>
<ul>
<li><code>^</code> ：表示同一主版本号中，不小于指定版本号的版本号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &#96;^2.2.1&#96; 对应主版本号为 2，不小于 &#96;2.2.1&#96; 的版本号，比如 &#96;2.2.1&#96;、&#96;2.2.2&#96;、&#96;2.3.0&#96; ,主版本号固定</span><br><span class="line">&#x2F;&#x2F; 当该依赖有最新版本时(eg:2.3.3)，npm install 会安装最新的依赖</span><br></pre></td></tr></table></figure>

<ul>
<li><code>~</code> ：表示同一主版本号和次版本号中，不小于指定版本号的版本号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#96;~2.2.1&#96; 对应主版本号为 2，次版本号为 2，不小于 &#96;2.2.1&#96; 的版本号，比如 &#96;2.2.1、2.2.2&#96;，主版本号和次版本号固定</span><br></pre></td></tr></table></figure>

<p>常用的就是上述两种情况，拿vue做个例子：</p>
<ul>
<li>项目兼容vue发布的此版本和补丁包版本：”vue”: “^2.5.0”</li>
<li>项目只兼容vue发布的补丁版本：”vue”: “~2.5.0”（发布2.6.0不会更新）</li>
</ul>
<div class="note warning">
            <p><strong>npm 中 package-lock.json 的一些坑</strong></p><p>在 npm install 后，会生成一个 package-lock.json 文件用于保存当前安装依赖的各种来源及版本号。</p><p>在 npm 5.4.2版本后，package-lock.json 的变动规则：</p><ul><li>当在 install dependency 的指定版本时，会自动更新 package-lock.json 文件中该 dependency 的 version 到指定的 version</li><li>当在 install dependency 的范围版本时，当前的 version 低于or等于 package-lock.json 文件中对应的 dependency 的 version 时，会安装 package-lock.json 中的 version；</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package.json</span><br><span class="line">&quot;antd&quot;: &quot;^3.6.1&quot;, &#x2F;&#x2F; eg：最新版本是 3.9.4</span><br><span class="line"></span><br><span class="line">package-lock.json</span><br><span class="line">&quot;antd&quot;: &quot;3.7.1&quot;,</span><br><span class="line"></span><br><span class="line">执行npm install 会安装 3.7.1 版本</span><br></pre></td></tr></table></figure><p>如果高于 package-lock.json 中对应的 dependency 的 version 时，会安装当前范围版本号中最高的版本，会更新 package-lock.json 文件中对应的版本号；</p><p>若版本使用<code>^</code>匹配符，想<code>临时</code>跳到某个固定版本，可以如下所示安装：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save antd@3.6.1</span><br></pre></td></tr></table></figure><p>若要固定版本，可以先删除<code>package-lock.json</code>，将<code>package.json</code>将antd改为<code>3.6.1</code>，不使用<code>匹配符</code>，执行<code>npm install</code></p>
          </div>



<h1 id="npm包发布"><a href="#npm包发布" class="headerlink" title="npm包发布"></a>npm包发布</h1><p>通常我们发布一个包到npm仓库时，我们的做法是先修改 <code>package.json</code> 为某个版本，然后执行 <code>npm publish</code> 命令。手动修改版本号的做法建立在你对Semver规范特别熟悉的基础之上，否则可能会造成版本混乱。npm 考虑到了这点，它提供了相关的命令来让我们更好的遵从Semver规范：</p>
<ul>
<li>升级补丁版本号：npm version patch</li>
<li>升级小版本号：npm version minor</li>
<li>升级大版本号：npm version major</li>
</ul>
<p>当执行 <code>npm publish</code> 时，会首先将当前版本发布到 <code>npm registry</code>，然后更新 <code>dist-tags.latest</code> 的值为新版本。</p>
<p>当执行 <code>npm publish --tag=next</code> 时，会首先将当前版本发布到 <code>npm registry</code>，并且更新 <code>dist-tags.next</code> 的值为新版本。这里的 next 可以是任意有意义的命名（比如：v1.x、v2.x 等等）</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener">语义化版本 2.0.0</a></li>
<li><a href="https://www.jianshu.com/p/a7490344044f" target="_blank" rel="noopener">semver 语义化版本规范</a></li>
<li><a href="https://segmentfault.com/a/1190000014405355" target="_blank" rel="noopener">Semver(语义化版本号)扫盲</a></li>
</ul>
]]></content>
      <categories>
        <category>版本管理</category>
      </categories>
      <tags>
        <tag>SemVer</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo搭建博客系列：（一）搭建属于自己的博客网站</title>
    <url>/2020/05/11/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%97%EF%BC%9A%EF%BC%88%E4%B8%80%EF%BC%89%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本教程是对Hexo+NexT博客部署到GitHub Pages的总结，你可以参照这个教程搭建出基本能用的博客网站，若你有自己的想法，可以自己参考相关文档进行个性化配置。针对后续我自己博客的个性化配置，我会在这一系列教程的其他教程中一一列举出来。</p>
<a id="more"></a>

<h1 id="Hexo建站"><a href="#Hexo建站" class="headerlink" title="Hexo建站"></a>Hexo建站</h1><p><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a>是一个基于<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js</a>的静态博客框架，它使用Markdown(或其他渲染引擎)解析文章，快速且高效。</p>
<h2 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h2><p>需要先安装下列应用程序：</p>
<ul>
<li>Node.js(最新版本，我的版本是V.12.13.0)</li>
<li>Git</li>
</ul>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<h2 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<p>新建完成后，文件夹目录如下所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>
<h3 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h3><p>网站的<a href="https://hexo.io/zh-cn/docs/configuration" target="_blank" rel="noopener">配置</a>信息。</p>
<h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p>应用程序的信息。</p>
<h3 id="scaffolds"><a href="#scaffolds" class="headerlink" title="scaffolds"></a>scaffolds</h3><p><a href="https://hexo.io/zh-cn/docs/writing" target="_blank" rel="noopener">模版</a>文件夹。当您新建文章时，Hexo 会根据scaffold来建立文件。</p>
<h3 id="source"><a href="#source" class="headerlink" title="source"></a>source</h3><p>资源文件夹是存放用户资源的地方。除<code>_posts</code>文件夹之外，开头命名为<code>_</code>(下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到<code>public</code>文件夹，而其他文件会被拷贝过去。</p>
<h3 id="themes"><a href="#themes" class="headerlink" title="themes"></a>themes</h3><p><a href="https://hexo.io/zh-cn/docs/themes" target="_blank" rel="noopener">主题</a>文件夹。Hexo会根据主题来生成静态页面。</p>
<h1 id="NexT主题"><a href="#NexT主题" class="headerlink" title="NexT主题"></a>NexT主题</h1><p><a href="http://theme-next.iissnan.com" target="_blank" rel="noopener">NexT</a>是Hexo主题中最受欢迎的一款主题（star最多），风格简洁，确实很好看。HexT的GitHub代码仓库经常变动，主要是下列3个仓库:</p>
<ul>
<li><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">2014-2017版本(当前最新V5.1.4)</a></li>
<li><a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">2018-2019(当前最新V7.8.0)</a></li>
<li><a href="https://github.com/next-theme/hexo-theme-next" target="_blank" rel="noopener">2020(<code>当前最新版本v8.0.0-rc.2，使用版本</code>)</a></li>
</ul>
<p>在 Hexo 中有两份主要的配置文件，其名称都是 _config.yml。 其中，一份位于站点根目录下，主要包含 Hexo 本身的配置；另一份位于主题目录下，这份配置由主题作者提供，主要用于配置主题相关的选项。<br>为了描述方便，在以下说明中，将前者称为<code>站点配置文件</code>， 后者称为<code>主题配置文件</code></p>
<h2 id="安装NexT"><a href="#安装NexT" class="headerlink" title="安装NexT"></a>安装NexT</h2><p>Hexo主题安装非常简单，只需要将主题文件拷贝至站点目录<code>themes</code>目录下，将主题目录命名为<code>next</code>。</p>
<h2 id="启动主题"><a href="#启动主题" class="headerlink" title="启动主题"></a>启动主题</h2><p>打开<code>站点配置文件</code>， 找到<code>theme</code>字段，并将其值更改为<code>next</code>。</p>
<h2 id="验证主题"><a href="#验证主题" class="headerlink" title="验证主题"></a>验证主题</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm run server</span><br></pre></td></tr></table></figure>
<p>使用浏览器访问<code>http://localhost:4000</code>，检查站点是否正确运行。<img src="https://yuanchangjian.github.io/cloudImage/images/20200515102636697.png" alt="image-20200515102636697"></p>
<p>现在，你已经成功安装并启用了 NexT 主题。下一步我们将对主题进行个性化配置。</p>
<h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><p>主题生效后，我们便开始配置主题的基本设置。</p>
<h3 id="设置站点标题"><a href="#设置站点标题" class="headerlink" title="设置站点标题"></a>设置站点标题</h3><p>编辑<code>站点配置文件</code>， 将<code>title</code>设置成你的站点标题。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">title: Ycj&#39;s Blog</span><br></pre></td></tr></table></figure>

<h3 id="设置站点描述"><a href="#设置站点描述" class="headerlink" title="设置站点描述"></a>设置站点描述</h3><p>编辑<code>站点配置文件</code>， 设置<code>description</code>字段为你的站点描述。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">description: 我是要成为海贼王的男人</span><br></pre></td></tr></table></figure>

<h3 id="设置作者昵称"><a href="#设置作者昵称" class="headerlink" title="设置作者昵称"></a>设置作者昵称</h3><p>编辑<code>站点配置文件</code>， 设置<code>author</code>为你的昵称。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">author: Ycj</span><br></pre></td></tr></table></figure>

<h3 id="设置语言"><a href="#设置语言" class="headerlink" title="设置语言"></a>设置语言</h3><p>编辑<code>站点配置文件</code>， 将<code>language</code>设置成你所需要的语言。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">language: zh-CN</span><br></pre></td></tr></table></figure>

<h3 id="设置外观"><a href="#设置外观" class="headerlink" title="设置外观"></a>设置外观</h3><p>Scheme 的切换通过更改<code>主题配置文件</code>，搜索<code>scheme</code>关键字。目前NexT支持四种外观，分别是：</p>
<ul>
<li>Muse</li>
<li>Mist</li>
<li>Pisces</li>
<li>Gemini</li>
</ul>
<p>我比较喜欢<code>Mist</code>这种风格，你可以自己都尝试一下。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">scheme: Mist</span><br><span class="line">#scheme: Pisces</span><br><span class="line">#scheme: Gemini</span><br></pre></td></tr></table></figure>

<h3 id="设置菜单"><a href="#设置菜单" class="headerlink" title="设置菜单"></a>设置菜单</h3><p>NexT默认菜单项如下所示，我当前使用了<code>home(首页)</code>、<code>categories(分类)</code>、<code>archives(归档)</code>、<code>tags(标签)</code>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: &#x2F; || fa fa-home</span><br><span class="line">  categories: &#x2F;categories&#x2F; || fa fa-th</span><br><span class="line">  archives: &#x2F;archives&#x2F; || fa fa-archive</span><br><span class="line">  tags: &#x2F;tags&#x2F; || fa fa-tags</span><br><span class="line">  # about: &#x2F;about&#x2F; || fa fa-user</span><br><span class="line">  # schedule: &#x2F;schedule&#x2F; || fa fa-calendar</span><br><span class="line">  # sitemap: &#x2F;sitemap.xml || fa fa-sitemap</span><br><span class="line">  # commonweal: &#x2F;404&#x2F; || fa fa-heartbeat</span><br></pre></td></tr></table></figure>

<h4 id="添加「分类」页面"><a href="#添加「分类」页面" class="headerlink" title="添加「分类」页面"></a>添加「分类」页面</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ hexo new page categories</span><br></pre></td></tr></table></figure>

<p>将新建的source/categories目录下的index.md增加type说明：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">type: categories</span><br><span class="line">date: 2020-05-12 10:55:35</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h4 id="添加「标签」页面"><a href="#添加「标签」页面" class="headerlink" title="添加「标签」页面"></a>添加「标签」页面</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ hexo new page tags</span><br></pre></td></tr></table></figure>

<p>将新建的<code>source/tags</code>目录下的<code>index.md</code>增加<code>type</code>说明：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">type: tags</span><br><span class="line">date: 2020-05-12 10:56:30</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h4 id="文章中添加标签和分类"><a href="#文章中添加标签和分类" class="headerlink" title="文章中添加标签和分类"></a>文章中添加标签和分类</h4><p>你可以在<code>文章</code>中的<code>Front-matter</code>中增加分类和标签，如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">categories:</span><br><span class="line">- Diary</span><br><span class="line">tags:</span><br><span class="line">- PS3</span><br><span class="line">- Games</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<div class="note danger">
            <p><strong>分类方法的分歧</strong></p><p>如果您有过使用 WordPress 的经验，就很容易误解 Hexo 的分类方式。WordPress 支持对一篇文章设置多个分类，而且这些分类可以是同级的，也可以是父子分类。但是 Hexo 不支持指定多个同级分类。下面的指定方法：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line">  - Diary</span><br><span class="line">  - Life</span><br></pre></td></tr></table></figure><p>会使分类<code>Life</code>成为<code>Diary</code>的子分类，而不是并列分类。因此，有必要为您的文章选择尽可能准确的分类。</p><p>如果你需要为文章添加多个分类，可以尝试以下 list 中的方法。</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line">- [Diary, PlayStation]</span><br><span class="line">- [Diary, Games]</span><br><span class="line">- [Life]</span><br></pre></td></tr></table></figure><p>此时这篇文章同时包括三个分类： <code>PlayStation</code> 和 <code>Games</code> 分别都是父分类 <code>Diary</code> 的子分类，同时 <code>Life</code> 是一个没有子分类的分类。</p>
          </div>

<h3 id="设置侧栏"><a href="#设置侧栏" class="headerlink" title="设置侧栏"></a>设置侧栏</h3><p>可以通过修改<code>主题配置文件</code>中的<code>sidebar</code>字段来控制侧栏的行为。设置侧栏的位置，修改<code>sidebar.position</code>的值，支持的选项有：</p>
<ul>
<li>left - 靠左放置</li>
<li>right - 靠右放置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sidebar:</span><br><span class="line">  #position: left</span><br><span class="line">  position: right</span><br></pre></td></tr></table></figure>

<h3 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h3><p>编辑<code>主题配置文件</code>， 修改<code>avatar</code>下的<code>url</code>字段，url可以是站内或完整的互联网URI:</p>
<ul>
<li>完整的互联网URI</li>
<li>站点内的地址，放置在主题<code>source/images/</code>目录下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">avatar:</span><br><span class="line">  url: &#x2F;images&#x2F;avatar.gif</span><br></pre></td></tr></table></figure>

<h3 id="设置RSS"><a href="#设置RSS" class="headerlink" title="设置RSS"></a>设置RSS</h3><p>安装<code>hexo-generator-feed</code>插件，它是hexo博客专门生成RSS xml文件的插件。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>
<p>编辑<code>站点配置文件</code>，在文件末尾添加下列配置：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># rss配置</span><br><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br></pre></td></tr></table></figure>

<div class="note warning">
            <p>RSS自动生成按钮在NexT V7.6.0版本移除，V7.6.0以下的NexT版本的博客网站普遍都有一个RSS按钮，不用担心，我们可以通过下面提到的设置社交链接展示出来。 </p>
          </div>

<h3 id="设置社交链接"><a href="#设置社交链接" class="headerlink" title="设置社交链接"></a>设置社交链接</h3><p>编辑<code>主题配置文件</code>， 在<code>social</code>中添加社交链接：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https:&#x2F;&#x2F;github.com&#x2F;yuanchangjian || fab fa-github</span><br><span class="line">  RSS: &#x2F;atom.xml || fa fa-rss</span><br><span class="line">  # 等等</span><br></pre></td></tr></table></figure>

<h3 id="设置友情链接"><a href="#设置友情链接" class="headerlink" title="设置友情链接"></a>设置友情链接</h3><p>编辑<code>主题配置文件</code>，在<code>links</code>下添加你的友情链接地址：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">links:</span><br><span class="line">  CoolShell: https:&#x2F;&#x2F;coolshell.cn&#x2F;</span><br><span class="line">  Eric: &#39;https:&#x2F;&#x2F;github.com&#x2F;lizhaoting&#39;</span><br></pre></td></tr></table></figure>

<h3 id="添加腾讯公益404页面"><a href="#添加腾讯公益404页面" class="headerlink" title="添加腾讯公益404页面"></a>添加腾讯公益404页面</h3><p>腾讯公益404页面，寻找丢失儿童，让大家一起关注此项公益事业！<br>使用方法，新建<code>404.html</code>页面，放到主题的<code>source</code>目录下，内容如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta http-equiv&#x3D;&quot;content-type&quot; content&#x3D;&quot;text&#x2F;html;charset&#x3D;utf-8;&quot;&#x2F;&gt;</span><br><span class="line">  &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge,chrome&#x3D;1&quot; &#x2F;&gt;</span><br><span class="line">  &lt;meta name&#x3D;&quot;robots&quot; content&#x3D;&quot;all&quot; &#x2F;&gt;</span><br><span class="line">  &lt;meta name&#x3D;&quot;robots&quot; content&#x3D;&quot;index,follow&quot;&#x2F;&gt;</span><br><span class="line">  &lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;https:&#x2F;&#x2F;qzone.qq.com&#x2F;gy&#x2F;404&#x2F;style&#x2F;404style.css&quot;&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script type&#x3D;&quot;text&#x2F;plain&quot; src&#x3D;&quot;http:&#x2F;&#x2F;www.qq.com&#x2F;404&#x2F;search_children.js&quot;</span><br><span class="line">          charset&#x3D;&quot;utf-8&quot; homePageUrl&#x3D;&quot;&#x2F;&quot;</span><br><span class="line">          homePageName&#x3D;&quot;回到我的主页&quot;&gt;</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;qzone.qq.com&#x2F;gy&#x2F;404&#x2F;data.js&quot; charset&#x3D;&quot;utf-8&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;qzone.qq.com&#x2F;gy&#x2F;404&#x2F;page.js&quot; charset&#x3D;&quot;utf-8&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="设置站点建立时间"><a href="#设置站点建立时间" class="headerlink" title="设置站点建立时间"></a>设置站点建立时间</h3><p>这个时间将在站点的底部显示，例如 © 2020 - 2022。 编辑<code>主题配置文件</code>，修改<code>since</code>字段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  # Specify the date when the site was setup. If not defined, current year will be used.</span><br><span class="line">  since: 2020</span><br></pre></td></tr></table></figure>

<p>现在，你已经完成了主题的基本配置，页面展示如下所示：</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200515110050.png" alt="image-20200515110048107"></p>
<hr>
<h2 id="集成常用的第三方服务"><a href="#集成常用的第三方服务" class="headerlink" title="集成常用的第三方服务"></a>集成常用的第三方服务</h2><h3 id="搜索服务"><a href="#搜索服务" class="headerlink" title="搜索服务"></a>搜索服务</h3><p>相较官网提供几种<a href="http://theme-next.iissnan.com/third-party-services.html#analytics-system" target="_blank" rel="noopener">搜索服务</a>，我这里使用的是<code>Local Search</code>，提供一个页面快速文章的功能。</p>
<ol>
<li><p>安装 <code>hexo-generator-searchdb</code>，在站点的根目录下执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑 <strong>站点配置文件</strong>，新增以下内容到任意位置：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑 <strong>主题配置文件</strong>，启用本地搜索功能：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Local search</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>重启应用，效果如下：<img src="https://yuanchangjian.github.io/cloudImage/images/20200515110300.png" alt="image-20200515110258588"></p>
<h3 id="数据统计与分析"><a href="#数据统计与分析" class="headerlink" title="数据统计与分析"></a>数据统计与分析</h3><p>我这里使用了<a href="http://theme-next.iissnan.com/third-party-services.html#analytics-busuanzi" target="_blank" rel="noopener">不蒜子统计</a>+LeanCloud实现站内的数据统计，这里提及一下，不蒜子现在版本对于首页多个文章无法统计阅读量，所以我i将不蒜子是用来统计网站访问量和用户量，LeanCloud用来统计文章的阅读量。</p>
<ul>
<li><p>不蒜子统计</p>
<p>编辑主题配置文件，找到<code>busuanzi_count</code>字段，修改为如下所示:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line">  enable: true</span><br><span class="line">  total_visitors: true</span><br><span class="line">  total_visitors_icon: fa fa-user</span><br><span class="line">  total_views: true</span><br><span class="line">  total_views_icon: fa fa-eye</span><br><span class="line">  post_views: false</span><br><span class="line">  post_views_icon: fa fa-eye</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>效果图如下（统计数不对是因为开发环境如此，部署会正确展示）：<img src="https://yuanchangjian.github.io/cloudImage/images/20200515111953.png" alt="image-20200515111951296"></p>
<ul>
<li><a href="https://www.leancloud.cn/" target="_blank" rel="noopener">LeanCloud</a></li>
</ul>
<ol>
<li><p>创建应用</p>
<p>应用名随意填写，不满意后续可更改。</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200515113114.png" alt="image-20200515113112829"></p>
</li>
<li><p>新建Class</p>
<p>为了保证我们前面对NexT主题的修改兼容，此处的新建Class名字必须为<code>Counter</code>。</p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200515113917.png" alt="image-20200515113916349"></p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200515113950.png" alt="image-20200515113948683"></p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200515115930.png" alt="image-20200515114552823"></p>
</li>
</ol>
<ol start="3">
<li><p>配置LeanCloud</p>
<p>获取<code>app_id</code>和<code>app_key</code></p>
<p><img src="https://yuanchangjian.github.io/cloudImage/images/20200515115919.png" alt="image-20200515115918389"></p>
<p>编辑主题配置文件，找到<code>leancloud_visitors</code>字段，将你的<code>app_id</code>和<code>app_key</code>填上，并修改<code>security</code>为<code>false</code>，修改为如下所示:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">leancloud_visitors:</span><br><span class="line">  enable: ture</span><br><span class="line">  app_id: xxx # &lt;your app id&gt;</span><br><span class="line">  app_key: xxx # &lt;your app key&gt;</span><br><span class="line">  server_url: # &lt;your server url&gt;</span><br><span class="line">  security: false</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h1 id="部署至GitHub-Pages"><a href="#部署至GitHub-Pages" class="headerlink" title="部署至GitHub Pages"></a>部署至GitHub Pages</h1><p>部署参考<a href="https://hexo.io/zh-cn/docs/github-pages" target="_blank" rel="noopener">官网部署教程</a>，这里我列出来是因为我想通过<code>&lt;GitHub 用户名&gt;.github.io</code>访问博客，但我发现<code>GitHub Pages</code>的部署分支只能为<code>master</code>，所以我修改了<code>.travis.yaml</code>文件，使我们在其他分支中（如：<code>hexo</code>）开发，而通过Travis CI工具部署至<code>master</code>分支，从而保证<code>&lt;GitHub 用户名&gt;.github.io</code>能正常访问。</p>
<p>如果你不需要<code>&lt;GitHub 用户名&gt;.github.io</code>如此访问，可以接受<code>&lt;GitHub 用户名&gt;.github.io/xxx</code>访问就无需更改<code>.travis.yaml</code>文件，可以跳过本小节教程，直接参考官网部署教程。</p>
<ol>
<li><p>新建一个 repository。如果你希望你的站点能通过 <code>&lt;GitHub 用户名&gt;.github.io</code> 域名访问，你的 repository 应该直接命名为 <code>&lt;GitHub 用户名&gt;.github.io</code>。</p>
</li>
<li><p>将你的 Hexo 站点文件夹推送到 repository 中。默认情况下不应该 <code>public</code> 目录将不会被推送到 repository 中，你应该检查 <code>.gitignore</code> 文件中是否包含 <code>public</code> 一行，如果没有请加上。</p>
</li>
<li><p>将 <a href="https://github.com/marketplace/travis-ci" target="_blank" rel="noopener">Travis CI</a> 添加到你的 GitHub 账户中。</p>
</li>
<li><p>前往 GitHub 的 <a href="https://github.com/settings/installations" target="_blank" rel="noopener">Applications settings</a>，配置 Travis CI 权限，使其能够访问你的 repository。</p>
</li>
<li><p>你应该会被重定向到 Travis CI 的页面。如果没有，请 <a href="https://travis-ci.com/" target="_blank" rel="noopener">手动前往</a>。</p>
</li>
<li><p>在浏览器新建一个标签页，前往 GitHub <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">新建 Personal Access Token</a>，只勾选 <code>repo</code> 的权限并生成一个新的 Token。Token 生成后请复制并保存好。</p>
</li>
<li><p>回到 Travis CI，前往你的 repository 的设置页面，在 <strong>Environment Variables</strong> 下新建一个环境变量，<strong>Name</strong> 为 <code>GH_TOKEN</code>，<strong>Value</strong> 为刚才你在 GitHub 生成的 Token。确保 <strong>DISPLAY VALUE IN BUILD LOG</strong> 保持 <strong>不被勾选</strong> 避免你的 Token 泄漏。点击 <strong>Add</strong> 保存。</p>
</li>
<li><p><strong>在你的 Hexo 站点文件夹中新建一个 <code>.travis.yml</code> 文件：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo: false</span><br><span class="line">language: node_js</span><br><span class="line">node_js:</span><br><span class="line">  - 10 # use nodejs v10 LTS</span><br><span class="line">cache: npm</span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - hexo # build master branch only (修改点：master -&gt; hexo)</span><br><span class="line">script:</span><br><span class="line">  - hexo generate # generate static files</span><br><span class="line">deploy:</span><br><span class="line">  provider: pages</span><br><span class="line">  skip-cleanup: true</span><br><span class="line">  github-token: $GH_TOKEN</span><br><span class="line">  keep-history: true</span><br><span class="line">  on:</span><br><span class="line">    branch: hexo # (修改点：master -&gt; hexo)</span><br><span class="line">  local-dir: public</span><br><span class="line">  target-branch: master # (增加项：将hexo分支编译到master分支部署)</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><p><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo官方网站</a></p>
</li>
<li><p><a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">Hexo官方使用文档</a></p>
</li>
<li><p><a href="https://notes.doublemine.me/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html#%E9%85%8D%E7%BD%AELeanCloud" target="_blank" rel="noopener">为NexT主题添加文章阅读量统计功能</a></p>
</li>
<li><p><a href="https://docs.travis-ci.com/" target="_blank" rel="noopener">Travis CI官方说明文档</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Hexo搭建博客系列</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
